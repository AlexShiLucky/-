<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Mixing C and assembler modules</title>
    <link rel="StyleSheet" href="css/MixingCandAssembler.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
  </head>
  <body style="background-color: White; background-image: url(&quot;images/BlackGrayStrip.png&quot;); background-position: center top; background-repeat: repeat-x">
    <table align="left">
      <tr>
        <td class="WebWorks_Company_Logo_Top">
          <img src="images/IARSystems.png" />
        </td>
      </tr>
    </table>
    <br clear="all" />
    <hr align="left" />
    <blockquote>
      <div class="Heading1"><a name="15992948">Mixing C and assembler modules</a></div>
      <div class="WebWorks_MiniTOC">
        <div class="WebWorks_MiniTOC_Level1">
          <a class="WebWorks_MiniTOC_Link" href="#15971732">Tutorial overview</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#16001653">Files used in this tutorial</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#16001988">Opening the tutorial files</a>
        </div>
        <div class="WebWorks_MiniTOC_Level1">
          <a class="WebWorks_MiniTOC_Link" href="#15972018">Mixing C and assembler modules</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#15984535">Examining the calling convention</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#15984737">Adding assembler modules to the project</a>
        </div>
        <div class="WebWorks_MiniTOC_Level2">
          <a class="WebWorks_MiniTOC_Link" href="#16007611">Analyzing the calling convention using C-SPY</a>
        </div>
      </div>
      <div class="Ingress"><a name="16012805">In some applications it might be necessary to write certain pieces of source code in assembler language. </a></div>
      <div class="Ingress"><a name="15999943">This tutorial demonstrates how the compiler can be helpful in examining the calling convention, which you must be familiar with when calling assembler modules from C modules or vice versa. Furthermore, this tutorial demonstrates how you can easily combine source modules written in C with assembler modules.</a></div>
      <div class="Ingress"><a name="15982671">Note that the screenshots in this tutorial do not always correspond exactly to the counterparts in your product.</a></div>
      <div class="Ingress"><a name="15982717">This tutorial assumes that you are familiar with basic use of IAR Embedded Workbench; see the tutorial </a><span class="Reference">Getting Started using IAR Embedded Workbench</span>.</div>
      <div class="Heading2"><a name="15971732">Tutorial overview</a></div>
      <div class="Heading3"><a name="16001653">Files used in this tutorial</a></div>
      <div class="Body"><a name="16002137">The project in this tutorial uses these files:</a></div>
      <div class="List_bullet_outer" style="margin-left: 0.5999999999999984cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_bullet_inner" style="width: 11.3385826771654pt; white-space: nowrap">
                <img src="images/bullet.png" alt="*" border="0" width="10" height="9" /> </div>
            </td>
            <td width="100%">
              <div class="List_bullet_inner"><span class="Computer"><a name="16002148">Fibonacci.c</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body_in_list"><a name="16002151">Contains a simple application that uses only standard features of the C language. It initializes an array with the ten first Fibonacci numbers and prints the result to </a><span class="Computer">stdout</span>.</div>
      <div class="List_bullet_outer" style="margin-left: 0.5999999999999984cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_bullet_inner" style="width: 11.3385826771654pt; white-space: nowrap">
                <img src="images/bullet.png" alt="*" border="0" width="10" height="9" /> </div>
            </td>
            <td width="100%">
              <div class="List_bullet_inner"><span class="Computer"><a name="16002165">Fibonacci.h</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body_in_list"><a name="16002170">Contains required definitions and declarations.</a></div>
      <div class="List_bullet_outer" style="margin-left: 0.5999999999999984cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_bullet_inner" style="width: 11.3385826771654pt; white-space: nowrap">
                <img src="images/bullet.png" alt="*" border="0" width="10" height="9" /> </div>
            </td>
            <td width="100%">
              <div class="List_bullet_inner"><span class="Computer"><a name="16002179">Utilities.c</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body_in_list"><a name="16002187">Contains utility routines required by </a><span class="Computer">Fibonacci.c</span> for the Fibonacci calculations.</div>
      <div class="List_bullet_outer" style="margin-left: 0.5999999999999984cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_bullet_inner" style="width: 11.3385826771654pt; white-space: nowrap">
                <img src="images/bullet.png" alt="*" border="0" width="10" height="9" /> </div>
            </td>
            <td width="100%">
              <div class="List_bullet_inner"><span class="Computer"><a name="16003024">Utilities.s</a></span> (or <span class="Computer">Utilities.s</span><span style="color: #000000; font-family: &quot;Microsoft Sans Serif&quot;; font-size: 8.0pt; font-style: normal">xx</span> if you are using a product that uses the XLINK linker, and where <span class="Computer_parameter">xx</span> is a numeric part that reflects the product you are using).</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body_in_list"><a name="16002222">The same as </a><span class="Computer">Utilities.c</span>, but using the assembler language.</div>
      <div class="List_bullet_outer" style="margin-left: 0.5999999999999984cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_bullet_inner" style="width: 11.3385826771654pt; white-space: nowrap">
                <img src="images/bullet.png" alt="*" border="0" width="10" height="9" /> </div>
            </td>
            <td width="100%">
              <div class="List_bullet_inner"><span class="Computer"><a name="16002231">Utilities.h</a></span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body_in_list"><a name="16002236">Contains required definitions and declarations.</a></div>
      <div class="Heading3"><a name="16001988">Opening the tutorial files</a></div>
      <div class="List_step_first_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_first_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">1	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_first_inner"><a name="16001782">In the IDE, if Information Center is not open, choose </a><span class="Menu_Command">Help&gt;Information Center</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">2	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="16001791">Click the </a><span class="Menu_Command">Product explorer</span> symbol.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="16001816"><img class="Default" src="images/TutorialsInInfoCenter_02.png" width="300" height="400" style="display: block; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">3	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="16001826">Under the </a><span class="Menu_Command">Language support</span> heading, click <span class="Menu_Command">Open the tutorial workspace</span>. Choose a destination for your project in the browse dialog box that appears.We recommend that you create a specific directory (with a subdirectory) where you store all your tutorial files, if you have not done that already. In this tutorial we call the directory <span class="Computer">MyTutorials</span> and the subdirectory <span class="Computer">LanguageSupport</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="16009975">After you have chosen a destination directory, the </a><span class="Computer">LanguageSupport</span> workspace is opened in the IDE.</div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">4	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="16001840">In the </a><span class="Menu_Command">Workspace</span> window, select the <span class="Computer">MixingCandAsm</span> project, right-click and choose <span class="Menu_Command">Set as Active</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="16001858"><img class="Default" src="images/MixingCandAsmInWorskpace_1.png" width="326" height="230" style="display: block; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="Heading2"><a name="15972018">Mixing C and assembler modules</a></div>
      <div class="Body"><a name="3164422">In this example procedure, you will work through these steps:</a></div>
      <div class="List_bullet_outer" style="margin-left: 0.5999999999999984cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_bullet_inner" style="width: 11.3385826771654pt; white-space: nowrap">
                <img src="images/bullet.png" alt="*" border="0" width="10" height="9" /> </div>
            </td>
            <td width="100%">
              <div class="List_bullet_inner"><a href="#15984535" title="Mixing C and assembler modules" name="3164432">Examining the calling convention</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="List_bullet_outer" style="margin-left: 0.5999999999999984cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_bullet_inner" style="width: 11.3385826771654pt; white-space: nowrap">
                <img src="images/bullet.png" alt="*" border="0" width="10" height="9" /> </div>
            </td>
            <td width="100%">
              <div class="List_bullet_inner"><a href="#15984737" title="Mixing C and assembler modules" name="15981664">Adding assembler modules to the project</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="List_bullet_outer" style="margin-left: 0.5999999999999984cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_bullet_inner" style="width: 11.3385826771654pt; white-space: nowrap">
                <img src="images/bullet.png" alt="*" border="0" width="10" height="9" /> </div>
            </td>
            <td width="100%">
              <div class="List_bullet_inner"><a href="#16007611" title="Mixing C and assembler modules" name="16007932">Analyzing the calling convention using C-SPY</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Heading3"><a name="15984535">Examining the calling convention</a></div>
      <div class="Body"><a name="15995462">When you write an assembler routine which is called from a C routine, you must be aware of the calling convention that the compiler uses. If you create skeleton code in C and let the compiler produce an assembler output file from it, you can study the produced file and find the details of the calling convention.</a></div>
      <div class="Body"><a name="15995845">In this example procedure, you will set up the compiler to create an assembler output file from the file </a><span class="Computer">Utilities.c</span>.</div>
      <div class="List_step_first_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_first_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">1	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_first_inner"><a name="15984798">In the </a><span class="Menu_Command">Workspace</span> window, select the file <span class="Computer">Utilities.c</span>, right-click, and choose <span class="Menu_Command">Options</span> from the context menu.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">2	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="15989522">Select the </a><span class="Menu_Command">C/C++ Compiler</span> category and then select <span class="Menu_Command">Override inherited settings</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">3	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="15989531">Verify these settings:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="TableAnchor"><a name="15996802">&nbsp;</a></div>
      <table class="Standard" style="text-align: left; width: 313.10532283464516pt" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #7f7f7f; border-bottom-style: solid; border-bottom-width: 1.2pt; padding-bottom: 3pt; padding-left: 0pt; padding-right: 4pt; padding-top: 3pt; vertical-align: middle; width: 69.4308755905512pt">
            <div class="CellHeading"><a name="16003290">Page</a></div>
          </td>
          <td style="border-bottom-color: #7f7f7f; border-bottom-style: solid; border-bottom-width: 1.2pt; padding-bottom: 3pt; padding-left: 0pt; padding-right: 4pt; padding-top: 3pt; vertical-align: middle; width: 132.774803149606pt">
            <div class="CellHeading"><a name="16003295">Option</a></div>
          </td>
          <td style="border-bottom-color: #7f7f7f; border-bottom-style: solid; border-bottom-width: 1.2pt; padding-bottom: 3pt; padding-left: 0pt; padding-right: 4pt; padding-top: 3pt; vertical-align: middle; width: 110.899644094488pt">
            <div class="CellHeading"><a name="16003370">Setting</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-top-color: #7f7f7f; border-top-style: solid; border-top-width: 1.2pt; padding-bottom: 3pt; padding-left: 0pt; padding-right: 4pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><span class="Menu_Command"><a name="16003303">Optimizations</a></span></div>
          </td>
          <td style="border-top-color: #7f7f7f; border-top-style: solid; border-top-width: 1.2pt; padding-bottom: 3pt; padding-left: 0pt; padding-right: 4pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><span class="Menu_Command"><a name="16003309">Level</a></span></div>
          </td>
          <td style="border-top-color: #7f7f7f; border-top-style: solid; border-top-width: 1.2pt; padding-bottom: 3pt; padding-left: 0pt; padding-right: 4pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="16003379">None (Best debug support)</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #7f7f7f; border-bottom-style: solid; border-bottom-width: 1.2pt; padding-bottom: 3pt; padding-left: 0pt; padding-right: 4pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><span class="Menu_Command"><a name="16003319">List</a></span></div>
          </td>
          <td style="border-bottom-color: #7f7f7f; border-bottom-style: solid; border-bottom-width: 1.2pt; padding-bottom: 3pt; padding-left: 0pt; padding-right: 4pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><span class="Menu_Command"><a name="16003327">Output assembler file</a></span></div>
            <div class="CellBody"><span class="Menu_Command"><a name="16003334">Include source</a></span></div>
            <div class="CellBody"><span class="Menu_Command"><a name="16003340">Include call frame information</a></span></div>
          </td>
          <td style="border-bottom-color: #7f7f7f; border-bottom-style: solid; border-bottom-width: 1.2pt; padding-bottom: 3pt; padding-left: 0pt; padding-right: 4pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBody"><a name="16003392">Enabled</a></div>
            <div class="CellBody"><a name="16003478">Enabled</a></div>
            <div class="CellBody"><a name="16003408">Disabled</a></div>
          </td>
        </tr>
      </table>
      <div class="Note_Generic">Note:&nbsp;<a name="15997288">&nbsp;</a></div>
      <div class="Body"><a name="15997347">In this example you must use a low optimization level when you compile the project, to show accesses to local and global variables. If you use a higher level of optimization, the references to local variables might be removed. However, the actual calling convention used is not affected by the optimization level.</a></div>
      <div class="Body"><a name="15998432">On project level, the settings used in the predefined tutorial project should be used as is.</a></div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">4	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="15984729">Click </a><span class="Menu_Command">OK</span> and return to the <span class="Menu_Command">Workspace</span> window.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">5	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="15997965">Compile the file </a><span class="Computer">Utilities.c</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">6	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="16004566">You can now find the file </a><span class="Computer">Utilities.s</span> (or <span class="Computer">Utilities.s</span><span style="color: #000000; font-family: &quot;Microsoft Sans Serif&quot;; font-size: 8.0pt; font-style: normal">xx</span>, depending on your product) in the <span class="Computer">Output</span> folder. Open the file to examine the calling convention and to see how the C code is represented in assembler language.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="16004500"><img class="Default" src="images/MixingCAsm_ExaminingSrc_Mym80_02.png" width="503" height="345" style="display: block; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="Body"><a name="16004503">You can see where and how parameters and the return value are passed, and how to return to the program location from where a function was called. You can also see which registers an assembler-level routine must preserve.</a></div>
      <div class="Body"><a name="15998359">To obtain the correct assembler interface for your own application functions, you should create skeleton code for each function that you need.</a></div>
      <div class="Body"><a name="16011424">For more information about the calling convention used in the compiler, see the </a><span class="Menu_Command">C/C++ Development Guide</span> (or <span class="Menu_Command">C/C++ Compiler User Guide</span>, depending on your product).</div>
      <div class="Heading3"><a name="15984737">Adding assembler modules to the project</a></div>
      <div class="Body"><a name="15998619">This example procedure demonstrates how you can create a project that contains both assembler modules and C modules.</a></div>
      <div class="List_step_first_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_first_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">1	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_first_inner"><a name="16005493">In the </a><span class="Menu_Command">Workspace</span> window, update the <span class="Computer">MixingCandAsm</span> project by adding the file <span class="Computer">Utilities.s</span> (or <span class="Computer">Utilities.s</span><span style="color: #000000; font-family: &quot;Microsoft Sans Serif&quot;; font-size: 8.0pt; font-style: normal">xx</span>, depending on your product) that you just created. In the <span class="Computer">Output</span> folder, select the file, right-click and choose <span class="Menu_Command">Open Containing Folder</span> from the context menu. In the browse window that appears, select the file and drag it to the <span class="Menu_Command">Workspace</span> window, or more specifically, to the project where you want to add the file.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">2	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="16006220">To exclude the file </a><span class="Computer">Utilities.c</span> from the build (which is no longer needed), select the file in the <span class="Menu_Command">Workspace</span> window, right-click and choose <span class="Menu_Command">Options</span> from the context menu. In the <span class="Menu_Command">Options</span> dialog box, select <span class="Menu_Command">Exclude from build</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="16006116"><img class="Default" src="images/MixCAsm_ExcludeFromBuild_1.png" width="365" height="198" style="display: block; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="Body"><a name="16009679">When you have finished making your settings, click </a><span class="Menu_Command">OK</span>.</div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">3	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="16003722">In the </a><span class="Menu_Command">Workspace</span> window, select <span class="Computer">MixingCandAsm - Debug</span>, right-click, and choose <span class="Menu_Command">Options</span> from the context menu. Use the default settings in the <span class="Menu_Command">General Options</span>, <span class="Menu_Command">C/C++ Compiler</span>, and <span class="Menu_Command">Linker</span> categories. Select the <span class="Menu_Command">Assembler</span> category, click the <span class="Menu_Command">List</span> tab, and make sure the option <span class="Menu_Command">Output list file</span> is selected.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="15999275">When you have finished making your settings, click </a><span class="Menu_Command">OK</span>.</div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">4	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="16006322">In the </a><span class="Menu_Command">Workspace</span> window, select <span class="Computer">MixingCandAsm - Debug</span>, right-click, and choose <span class="Menu_Command">Rebuild All</span> from the context menu. The project is built with the assembler file instead of with the corresponding C file.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">5	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="15989078">To open the list file, double-click the file </a><span class="Computer">Utilities.lst</span> available in the <span class="Computer">Output</span> folder in the <span class="Menu_Command">Workspace</span> window.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="16006910"><img class="Default" src="images/MixCAsm_ViewingsLst_1.png" width="491" height="345" style="display: block; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="Body"><a name="16006913">The end of the file contains a summary of errors and warnings that were generated.</a></div>
      <div class="Body"><a name="15999587">For further details of the list file format, see the </a><span style="color: #000000; font-style: italic">IAR Assembler User Guide</span><span class="Reference" style="color: #000000">.</span></div>
      <div class="Heading3"><a name="16007611">Analyzing the calling convention using C-SPY</a></div>
      <div class="List_step_first_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_first_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">1	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_first_inner"><a name="16007779">Start C-SPY to execute the </a><span class="Computer">MixingCandAsm</span> application.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">2	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="16008013">In </a><span class="Computer">Fibonacci.c</span>, position your cursor in the <span class="Computer">fib = GetFib(callCount);</span> statement and choose <span class="Menu_Command">Debug&gt;Run to Cursor</span> (alternatively, click the button <img class="Default" src="images/RunToCursorButton_Mym80_02.png" width="25" height="25" style="display: inline; left: 0.0; top: 0.0" alt="" />).</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="16008031"><img class="Default" src="images/MixCAsm_RunningToCursor_1.png" width="448" height="146" style="display: block; left: 0.0; top: 0.0" alt="" /></a></div>
      <div class="Body"><a name="16008168">Hover with the mouse pointer over </a><span class="Computer">CallCount</span> to see its value.</div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">3	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="16008042">Choose </a><span class="Menu_Command">C/C++ Development Guide</span> (or <span class="Menu_Command">C/C++ Compiler User Guide</span>, depending on your product) from the <span class="Menu_Command">Help</span> menu.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="16008452">In the PDF’s </a><span class="Menu_Command">Bookmarks</span> pane, navigate to <span class="Reference">Part 1, Assembler language interface</span>, <span class="Reference">Calling convention</span>, and click on <span class="Reference">Function entrance</span>. Under the heading <span class="Reference">Register parameters</span>, notice which registers that are used for parameters.</div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">4	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="16008268">In C-SPY, choose </a><span class="Menu_Command">View&gt;Disassembly</span> and <span class="Menu_Command">View&gt;Registers</span> to open these windows.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="16008933">In the </a><span class="Menu_Command">Disassembly</span> window, notice the use of registers in the instructions leading up to the subroutine call. </div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">5	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="16009315">Click the </a><span class="Menu_Command">Step Into</span> button (<img class="Default" src="images/StepIntoButton_Mym80_02.png" width="25" height="25" style="display: inline; left: 0.0; top: 0.0" alt="" />). Notice how the editor window now displays the assembler source code.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="List_step_outer" style="margin-left: 0.5062999999999767cm">
        <table border="0" cellspacing="0" cellpadding="0" summary="" role="presentation">
          <tr style="vertical-align: baseline">
            <td>
              <div class="List_step_inner" style="width: 13.994645669291998pt; white-space: nowrap">
                <span class="N_Step">6	</span>
              </div>
            </td>
            <td width="100%">
              <div class="List_step_inner"><a name="16009324">In the </a><span class="Menu_Command">Registers</span> window, notice how the used register(s) have been updated accordingly.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="16009470">Exit the debugger when you are done.</a></div>
    </blockquote>
  </body>
</html>